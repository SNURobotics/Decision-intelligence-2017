%% project to RotZ
numB = 4;
R = zeros(3,3,numB);
p = zeros(3,numB);
R(:,:,1) = projectToRotZ([0.857752, -0.513389, 0.026321;
    0.512838, 0.858118, 0.025108;
    -0.035476, -0.008038, 0.999338]);
p(:,1) = [-0.280178, -0.109590, 0.843439]';

R(:,:,2) = projectToRotZ([0.353052, -0.934938, 0.035280;
    0.935125, 0.353826, 0.018640;
    -0.029910, 0.026410, 0.999204]);
p(:,2) = [-0.266852, -0.020595, 0.843658]';

R(:,:,3) = projectToRotZ([-0.743844, -0.668199, 0.014351;
    0.668328, -0.743831, 0.007326;
    0.005779, 0.015040, 0.999870]);
p(:,3) = [-0.373395, 0.011193, 0.843244]';

R(:,:,4) = projectToRotZ([0.978449, -0.206485, -0.001310;
    0.206487, 0.978396, 0.010234;
    -0.000831, -0.010284, 0.999947]);
p(:,4) = [-0.367668, 0.117539, 0.842430]';


%% 
Tbusbar2gripper_tight = [RotZ(pi/2)*RotX(pi), [0;0;0.015]; 0, 0, 0, 1];

Tbusbar = zeros(4,4,numB);

z_conv = 1.03555 + 0.5*0.1511;
z_robot1 = 1.972;
for i = 1:numB
    Tbusbar(:,:,i) = [R(:,:,i), p(:,i); 0, 0, 0, 1] * Tbusbar2gripper_tight^-1;
    if (Tbusbar(3,4,i) > z_robot1 - z_conv - 0.001)
        Tbusbar(3,4,i) = z_robot1 - z_conv - 0.001;
    end
    temp = reshape(Tbusbar(1:3,:,i), 1,12);
    tempchar = [];
    for j = 1:12
        tempchar = [tempchar, num2str(temp(j)), ','];
    end
    display(tempchar)
end




